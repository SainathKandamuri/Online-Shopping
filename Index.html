<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopNest - Your Online Store</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font for a modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
            color: #333;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e0e0e0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-4xl font-bold tracking-tight cursor-pointer" onclick="showPage(landingPage)">ShopNest</h1>
            <nav class="flex items-center space-x-4">
                <button id="viewCartBtn" class="bg-white text-blue-600 px-6 py-3 rounded-full font-semibold shadow-md hover:bg-gray-100 transition duration-300 ease-in-out transform hover:scale-105">
                    View Cart (<span id="cartItemCount">0</span>)
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto p-8">

        <!-- Landing Page Section -->
        <section id="landingPage" class="page-section">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Featured Products</h2>
            <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <!-- Products will be rendered here by JavaScript -->
            </div>
        </section>

        <!-- Cart Page Section -->
        <section id="cartPage" class="page-section hidden">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Your Shopping Cart</h2>
            <div id="cartItems" class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <!-- Cart items will be rendered here by JavaScript -->
                <p id="emptyCartMessage" class="text-center text-gray-500 text-lg hidden">Your cart is empty.</p>
            </div>
            <div class="flex flex-col sm:flex-row justify-between items-center bg-white rounded-xl shadow-lg p-6">
                <p class="text-3xl font-bold text-gray-800 mb-4 sm:mb-0">Total: $<span id="cartTotal">0.00</span></p>
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                    <button id="continueShoppingBtn" class="bg-gray-200 text-gray-700 px-8 py-4 rounded-full font-semibold shadow-md hover:bg-gray-300 transition duration-300 ease-in-out transform hover:scale-105">
                        Continue Shopping
                    </button>
                    <button id="proceedToShippingBtn" class="bg-green-500 text-white px-8 py-4 rounded-full font-semibold shadow-md hover:bg-green-600 transition duration-300 ease-in-out transform hover:scale-105">
                        Proceed to Shipping
                    </button>
                </div>
            </div>
        </section>

        <!-- Shipping Details Section -->
        <section id="shippingPage" class="page-section hidden">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Shipping Details</h2>
            <div class="bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
                <form id="shippingForm" class="space-y-6">
                    <div>
                        <label for="fullName" class="block text-lg font-medium text-gray-700 mb-2">Full Name</label>
                        <input type="text" id="fullName" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="John Doe" required>
                    </div>
                    <div>
                        <label for="addressLine1" class="block text-lg font-medium text-gray-700 mb-2">Address Line 1</label>
                        <input type="text" id="addressLine1" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="123 Main St" required>
                    </div>
                    <div>
                        <label for="addressLine2" class="block text-lg font-medium text-gray-700 mb-2">Address Line 2 (Optional)</label>
                        <input type="text" id="addressLine2" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="Apt, Suite, Unit">
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                        <div>
                            <label for="city" class="block text-lg font-medium text-gray-700 mb-2">City</label>
                            <input type="text" id="city" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="Anytown" required>
                        </div>
                        <div>
                            <label for="state" class="block text-lg font-medium text-gray-700 mb-2">State/Province</label>
                            <input type="text" id="state" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="CA" required>
                        </div>
                        <div>
                            <label for="zipCode" class="block text-lg font-medium text-gray-700 mb-2">Zip/Postal Code</label>
                            <input type="text" id="zipCode" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="12345" required pattern="[0-9]{5}(-[0-9]{4})?" title="Enter a valid zip or postal code">
                        </div>
                    </div>
                    <div>
                        <label for="email" class="block text-lg font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="email" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="you@example.com" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white px-6 py-4 rounded-full font-bold text-xl shadow-lg hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105">
                        Proceed to Payment
                    </button>
                </form>
                <div id="shippingMessage" class="mt-6 text-center text-red-600 font-medium hidden"></div>
            </div>
        </section>

        <!-- Payment Details Section -->
        <section id="paymentPage" class="page-section hidden">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Payment Details</h2>
            <div class="bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
                <form id="paymentForm" class="space-y-6">
                    <div>
                        <label for="cardNumber" class="block text-lg font-medium text-gray-700 mb-2">Card Number</label>
                        <input type="text" id="cardNumber" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="XXXX XXXX XXXX XXXX" required pattern="[0-9]{16}" title="Card number must be 16 digits">
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        <div>
                            <label for="expiryDate" class="block text-lg font-medium text-gray-700 mb-2">Expiry Date (MM/YY)</label>
                            <input type="text" id="expiryDate" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="MM/YY" required pattern="(0[1-9]|1[0-2])\/([0-9]{2})" title="Expiry date must be in MM/YY format">
                        </div>
                        <div>
                            <label for="cvv" class="block text-lg font-medium text-gray-700 mb-2">CVV</label>
                            <input type="text" id="cvv" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="XXX" required pattern="[0-9]{3,4}" title="CVV must be 3 or 4 digits">
                        </div>
                    </div>
                    <div>
                        <label for="cardName" class="block text-lg font-medium text-gray-700 mb-2">Cardholder Name</label>
                        <input type="text" id="cardName" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" placeholder="Full Name" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white px-6 py-4 rounded-full font-bold text-xl shadow-lg hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105">
                        Pay Now
                    </button>
                </form>
                <div id="paymentMessage" class="mt-6 text-center text-red-600 font-medium hidden"></div>
            </div>
        </section>

        <!-- Thank You Section -->
        <section id="thankYouPage" class="page-section hidden">
            <div class="flex flex-col items-center justify-center h-full text-center bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
                <svg class="w-24 h-24 text-green-500 mb-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                <h2 class="text-5xl font-extrabold text-gray-800 mb-4">Thank You!</h2>
                <p class="text-xl text-gray-600 mb-8">Your order has been placed successfully.</p>
                <button id="backToShopBtn" class="bg-blue-600 text-white px-8 py-4 rounded-full font-bold text-xl shadow-lg hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105">
                    Continue Shopping
                </button>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="aboutUsPage" class="page-section hidden">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">About ShopNest</h2>
            <div class="bg-white rounded-xl shadow-lg p-8 max-w-3xl mx-auto text-lg text-gray-700 leading-relaxed">
                <p class="mb-4">Welcome to **ShopNest**, your ultimate destination for high-quality electronics, home goods, and more! We are dedicated to providing you with the best online shopping experience, offering a wide selection of products at competitive prices.</p>
                <p class="mb-4">Our mission is to make online shopping convenient, secure, and enjoyable for everyone. We believe in transparency, excellent customer service, and building lasting relationships with our valued customers.</p>
                <p class="mb-4">Founded in 2025, ShopNest started with a simple idea: to create a reliable platform where customers can find everything they need with just a few clicks. We are constantly expanding our product range and improving our services to meet your evolving needs.</p>
                <p>Thank you for choosing ShopNest. We look forward to serving you!</p>
            </div>
        </section>

        <!-- Contact Details Section -->
        <section id="contactPage" class="page-section hidden">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Contact Us</h2>
            <div class="bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto text-lg text-gray-700 leading-relaxed">
                <p class="mb-4">Have questions or need assistance? Our customer support team is here to help!</p>
                <ul class="list-disc list-inside space-y-2 mb-6">
                    <li>**Email:** <a href="mailto:support@shopnest.com" class="text-blue-600 hover:underline">support@shopnest.com</a></li>
                    <li>**Phone:** <a href="tel:+1234567890" class="text-blue-600 hover:underline">+1 (234) 567-890</a> (Mon-Fri, 9 AM - 5 PM EST)</li>
                    <li>**Address:** 123 E-commerce Lane, Suite 100, Shopville, ST 98765</li>
                </ul>
                <p>You can also reach out to us through our social media channels:</p>
                <div class="flex justify-center space-x-6 mt-4">
                    <a href="#" class="text-blue-600 hover:text-blue-800 transition duration-300 ease-in-out">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.262c-1.225 0-1.628.75-1.628 1.542V12h2.77l-.443 2.89h-2.327V22H12c5.523 0 10-4.477 10-10z" />
                        </svg>
                    </a>
                    <a href="#" class="text-pink-600 hover:text-pink-800 transition duration-300 ease-in-out">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12 0C8.74 0 8.333.014 7.053.072 5.775.132 4.905.333 4.14.636c-.78.303-1.455.778-2.116 1.439-.661.66-.136 1.336-1.438 2.116-.303.76-.504 1.63-.564 2.907C.014 8.333 0 8.74 0 12s.014 3.667.072 4.947c.06 1.277.261 2.148.564 2.907.303.78.778 1.455 1.439 2.116.66.661 1.336 1.137 2.116 1.438.76.303 1.63.504 2.907.564C8.333 23.986 8.74 24 12 24s3.667-.014 4.947-.072c1.277-.06 2.148-.261 2.907-.564.78-.303 1.455-.778 2.116-1.439.661-.66.137-1.336 1.438-2.116.303-.76.504-1.63.564-2.907.058-1.28.072-1.683.072-4.947s-.014-3.667-.072-4.947c-.06-1.277-.261-2.148-.564-2.907-.303-.78-.778-1.455-1.439-2.116-.66-.661-1.336-1.137-2.116-1.438C17.667.261 16.797.06 15.52.002 14.24 0 13.833 0 12 0zm0 2.16c3.2 0 3.58.01 4.85.071 1.17.055 1.8.249 2.22.414.42.165.73.385 1.01.665.28.28.5.59.665 1.01.165.42.359 1.05.414 2.22.06 1.27.07 1.65.07 4.85s-.01 3.58-.07 4.85c-.055 1.17-.249 1.8-.414 2.22-.165.42-.385.73-.665 1.01-.28.28-.59.5-.101.665-.42.165-1.05.359-2.22.414-1.27.06-1.65.07-4.85.07s-3.58-.01-4.85-.07c-1.17-.055-1.8-.249-2.22-.414-.42-.165-.73-.385-1.01-.665-.28-.28-.5-.59-.665-1.01-.165-.42-.359-1.05-.414-2.22-.06-1.27-.07-1.65-.07-4.85s.01-3.58.07-4.85c.055-1.17.249-1.8.414-2.22.165-.42.385-.73.665-1.01.28-.28.59-.5.101-.665.42-.165 1.05-.359 2.22-.414C8.42 2.17 8.8 2.16 12 2.16zm0 3.635c-3.485 0-6.305 2.82-6.305 6.305s2.82 6.305 6.305 6.305 6.305-2.82 6.305-6.305-2.82-6.305-6.305-6.305zm0 10.385c-2.25 0-4.08-1.83-4.08-4.08s1.83-4.08 4.08-4.08 4.08 1.83 4.08 4.08-1.83 4.08-4.08 4.08zm6.406-11.45c-.82 0-1.48-.66-1.48-1.48s.66-1.48 1.48-1.48 1.48.66 1.48 1.48-.66 1.48-1.48 1.48z" clip-rule="evenodd" />
                        </svg>
                    </a>
                    <a href="#" class="text-blue-400 hover:text-blue-600 transition duration-300 ease-in-out">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.417 0-6.184 2.766-6.184 6.182 0 .485.054.956.151 1.408-5.14-2.583-9.71-5.42-12.762-9.183-.537.917-.845 1.98-.845 3.131 0 2.144 1.09 4.035 2.748 5.148-.807-.025-1.568-.247-2.229-.616v.086c0 2.99 2.126 5.485 4.935 6.042-.518.142-1.066.22-1.635.22-.4 0-.79-.039-1.169-.112.78 2.443 3.06 4.237 5.766 4.286-2.09 1.64-4.724 2.62-7.59 2.62-.493 0-.979-.029-1.46-.086 2.705 1.735 5.93 2.75 9.387 2.75 11.26 0 17.41-9.314 17.41-17.41 0-.266-.007-.53-.02-.795.96-.695 1.795-1.56 2.455-2.553z" />
                        </svg>
                    </a>
                </div>
            </div>
        </section>

        <!-- Custom Message Box for Alerts -->
        <div id="messageBox" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full text-center">
                <h3 id="messageBoxTitle" class="text-2xl font-bold mb-4 text-gray-800"></h3>
                <p id="messageBoxContent" class="text-lg text-gray-600 mb-6"></p>
                <button id="messageBoxCloseBtn" class="bg-blue-600 text-white px-6 py-3 rounded-full font-semibold hover:bg-blue-700 transition duration-300 ease-in-out">
                    OK
                </button>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white p-6 text-center mt-8">
        <div class="container mx-auto flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-8">
            <p>&copy; 2025 ShopNest. All rights reserved.</p>
            <nav class="flex space-x-4">
                <button onclick="showPage(aboutUsPage)" class="text-white hover:text-gray-300 transition duration-300 ease-in-out">About Us</button>
                <button onclick="showPage(contactPage)" class="text-white hover:text-gray-300 transition duration-300 ease-in-out">Contact</button>
            </nav>
        </div>
    </footer>

    <script>
        // Array of product objects
        const products = [
            { id: 1, name: "Wireless Headphones", price: 79.99, image: "https://placehold.co/400x300/e0e7ff/3b82f6?text=Headphones" },
            { id: 2, name: "Smartwatch Pro", price: 199.99, image: "https://placehold.co/400x300/d1fae5/10b981?text=Smartwatch" },
            { id: 3, name: "Portable Bluetooth Speaker", price: 49.99, image: "https://placehold.co/400x300/ffe4e6/ef4444?text=Speaker" },
            { id: 4, name: "Ergonomic Office Chair", price: 249.99, image: "https://placehold.co/400x300/fef3c7/f59e0b?text=Chair" },
            { id: 5, name: "4K Ultra HD Monitor", price: 349.99, image: "https://placehold.co/400x300/e0f2fe/0ea5e9?text=Monitor" },
            { id: 6, name: "Gaming Keyboard", price: 89.99, image: "https://placehold.co/400x300/f3e8ff/8b5cf6?text=Keyboard" },
            { id: 7, name: "External SSD 1TB", price: 129.99, image: "https://placehold.co/400x300/dbeafe/3b82f6?text=SSD" },
            { id: 8, name: "Robot Vacuum Cleaner", price: 299.99, image: "https://placehold.co/400x300/fce7f3/ec4899?text=Vacuum" }
        ];

        // Array to store items in the shopping cart
        let cart = [];

        // Get references to HTML elements
        const productsGrid = document.getElementById('productsGrid');
        const cartItemsContainer = document.getElementById('cartItems');
        const cartTotalSpan = document.getElementById('cartTotal');
        const cartItemCountSpan = document.getElementById('cartItemCount');
        const emptyCartMessage = document.getElementById('emptyCartMessage');

        const landingPage = document.getElementById('landingPage');
        const cartPage = document.getElementById('cartPage');
        const shippingPage = document.getElementById('shippingPage'); // New
        const paymentPage = document.getElementById('paymentPage');
        const thankYouPage = document.getElementById('thankYouPage');
        const aboutUsPage = document.getElementById('aboutUsPage'); // New
        const contactPage = document.getElementById('contactPage'); // New

        const viewCartBtn = document.getElementById('viewCartBtn');
        const continueShoppingBtn = document.getElementById('continueShoppingBtn');
        const proceedToShippingBtn = document.getElementById('proceedToShippingBtn'); // Changed from proceedToPaymentBtn
        const shippingForm = document.getElementById('shippingForm'); // New
        const shippingMessage = document.getElementById('shippingMessage'); // New
        const paymentForm = document.getElementById('paymentForm');
        const backToShopBtn = document.getElementById('backToShopBtn');
        const paymentMessage = document.getElementById('paymentMessage');

        const messageBox = document.getElementById('messageBox');
        const messageBoxTitle = document.getElementById('messageBoxTitle');
        const messageBoxContent = document.getElementById('messageBoxContent');
        const messageBoxCloseBtn = document.getElementById('messageBoxCloseBtn');

        /**
         * Displays a custom message box instead of alert().
         * @param {string} title - The title of the message box.
         * @param {string} content - The content message.
         */
        function showMessageBox(title, content) {
            messageBoxTitle.textContent = title;
            messageBoxContent.textContent = content;
            messageBox.classList.remove('hidden');
        }

        // Close button for the custom message box
        messageBoxCloseBtn.addEventListener('click', () => {
            messageBox.classList.add('hidden');
        });

        /**
         * Renders all products on the landing page.
         */
        function renderProducts() {
            productsGrid.innerHTML = ''; // Clear existing products
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition duration-300 ease-in-out';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">${product.name}</h3>
                        <p class="text-2xl font-bold text-blue-600 mb-4">$${product.price.toFixed(2)}</p>
                        <button onclick="addToCart(${product.id})" class="w-full bg-blue-500 text-white px-5 py-3 rounded-full font-semibold shadow-md hover:bg-blue-600 transition duration-300 ease-in-out">
                            Add to Cart
                        </button>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }

        /**
         * Adds a product to the cart or increments its quantity if already present.
         * @param {number} productId - The ID of the product to add.
         */
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                const cartItem = cart.find(item => item.id === productId);
                if (cartItem) {
                    cartItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                updateCartUI();
                showMessageBox('Item Added!', `${product.name} has been added to your cart.`);
            }
        }

        /**
         * Removes an item completely from the cart.
         * @param {number} productId - The ID of the product to remove.
         */
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartUI();
        }

        /**
         * Updates the quantity of an item in the cart.
         * @param {number} productId - The ID of the product.
         * @param {number} change - The amount to change the quantity by (e.g., 1 for increment, -1 for decrement).
         */
        function updateQuantity(productId, change) {
            const cartItem = cart.find(item => item.id === productId);
            if (cartItem) {
                cartItem.quantity += change;
                if (cartItem.quantity <= 0) {
                    removeFromCart(productId); // Remove if quantity drops to 0 or less
                } else {
                    updateCartUI();
                }
            }
        }

        /**
         * Renders the items in the cart and calculates the total.
         */
        function renderCart() {
            cartItemsContainer.innerHTML = ''; // Clear existing cart items
            let total = 0;

            if (cart.length === 0) {
                emptyCartMessage.classList.remove('hidden');
                proceedToShippingBtn.disabled = true; // Disable shipping button if cart is empty
                proceedToShippingBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                emptyCartMessage.classList.add('hidden');
                proceedToShippingBtn.disabled = false;
                proceedToShippingBtn.classList.remove('opacity-50', 'cursor-not-allowed');

                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const cartItemElement = document.createElement('div');
                    cartItemElement.className = 'flex items-center justify-between border-b border-gray-200 py-4 last:border-b-0';
                    cartItemElement.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <img src="${item.image}" alt="${item.name}" class="w-20 h-20 object-cover rounded-lg shadow-sm">
                            <div>
                                <h3 class="text-xl font-semibold text-gray-900">${item.name}</h3>
                                <p class="text-gray-600">Price: $${item.price.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center border border-gray-300 rounded-lg">
                                <button onclick="updateQuantity(${item.id}, -1)" class="px-3 py-1 text-lg font-bold text-gray-700 hover:bg-gray-100 rounded-l-lg">-</button>
                                <span class="px-3 text-lg">${item.quantity}</span>
                                <button onclick="updateQuantity(${item.id}, 1)" class="px-3 py-1 text-lg font-bold text-gray-700 hover:bg-gray-100 rounded-r-lg">+</button>
                            </div>
                            <p class="text-xl font-bold text-blue-600">$${itemTotal.toFixed(2)}</p>
                            <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700 transition duration-300 ease-in-out">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItemElement);
                });
            }
            cartTotalSpan.textContent = total.toFixed(2);
        }

        /**
         * Updates the cart item count in the header.
         */
        function updateCartItemCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartItemCountSpan.textContent = totalItems;
        }

        /**
         * Combines rendering cart items and updating item count.
         */
        function updateCartUI() {
            renderCart();
            updateCartItemCount();
        }

        /**
         * Shows a specific page and hides all others.
         * @param {HTMLElement} pageToShow - The page element to display.
         */
        function showPage(pageToShow) {
            [landingPage, cartPage, shippingPage, paymentPage, thankYouPage, aboutUsPage, contactPage].forEach(page => {
                page.classList.add('hidden');
            });
            pageToShow.classList.remove('hidden');
            // Scroll to top when changing pages
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        /**
         * Handles the shipping details submission and proceeds to payment.
         * @param {Event} event - The form submission event.
         */
        function processShipping(event) {
            event.preventDefault(); // Prevent default form submission

            // Basic client-side validation for shipping details
            const fullName = document.getElementById('fullName').value;
            const addressLine1 = document.getElementById('addressLine1').value;
            const city = document.getElementById('city').value;
            const state = document.getElementById('state').value;
            const zipCode = document.getElementById('zipCode').value;
            const email = document.getElementById('email').value;

            shippingMessage.classList.add('hidden'); // Hide previous messages

            if (!fullName || !addressLine1 || !city || !state || !zipCode || !email) {
                shippingMessage.textContent = 'Please fill in all required shipping details.';
                shippingMessage.classList.remove('hidden');
                return;
            }

            if (!/^[0-9]{5}(-[0-9]{4})?$/.test(zipCode)) {
                shippingMessage.textContent = 'Please enter a valid Zip/Postal Code.';
                shippingMessage.classList.remove('hidden');
                return;
            }

            if (!/\S+@\S+\.\S+/.test(email)) {
                shippingMessage.textContent = 'Please enter a valid email address.';
                shippingMessage.classList.remove('hidden');
                return;
            }

            // If validation passes, proceed to payment page
            showPage(paymentPage);
        }


        /**
         * Handles the payment processing (simulated).
         * @param {Event} event - The form submission event.
         */
        function processPayment(event) {
            event.preventDefault(); // Prevent default form submission

            // Basic client-side validation
            const cardNumber = document.getElementById('cardNumber').value;
            const expiryDate = document.getElementById('expiryDate').value;
            const cvv = document.getElementById('cvv').value;
            const cardName = document.getElementById('cardName').value;

            paymentMessage.classList.add('hidden'); // Hide previous messages

            if (!cardNumber || !expiryDate || !cvv || !cardName) {
                paymentMessage.textContent = 'Please fill in all payment details.';
                paymentMessage.classList.remove('hidden');
                return;
            }

            if (!/^[0-9]{16}$/.test(cardNumber)) {
                paymentMessage.textContent = 'Card number must be 16 digits.';
                paymentMessage.classList.remove('hidden');
                return;
            }

            if (!/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(expiryDate)) {
                paymentMessage.textContent = 'Expiry date must be in MM/YY format.';
                paymentMessage.classList.remove('hidden');
                return;
            }

            if (!/^[0-9]{3,4}$/.test(cvv)) {
                paymentMessage.textContent = 'CVV must be 3 or 4 digits.';
                paymentMessage.classList.remove('hidden');
                return;
            }

            // Simulate payment processing delay
            showMessageBox('Processing Payment', 'Please wait while your payment is being processed...');
            setTimeout(() => {
                messageBox.classList.add('hidden'); // Hide processing message

                // In a real application, you would send payment data to a backend
                // and handle success/failure based on the response.
                // For this simulation, we'll always assume success.

                cart = []; // Clear cart after successful payment
                updateCartUI(); // Update cart display and count

                showPage(thankYouPage); // Navigate to thank you page
                paymentForm.reset(); // Clear payment form
                shippingForm.reset(); // Clear shipping form as well
            }, 2000); // Simulate 2-second processing time
        }

        // Event Listeners
        viewCartBtn.addEventListener('click', () => {
            showPage(cartPage);
            updateCartUI(); // Ensure cart is updated when viewed
        });

        continueShoppingBtn.addEventListener('click', () => {
            showPage(landingPage);
        });

        // Changed from proceedToPaymentBtn to proceedToShippingBtn
        proceedToShippingBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                showMessageBox('Cart Empty', 'Your cart is empty. Please add items before proceeding.');
                return;
            }
            showPage(shippingPage);
        });

        shippingForm.addEventListener('submit', processShipping); // New event listener for shipping form
        paymentForm.addEventListener('submit', processPayment);

        backToShopBtn.addEventListener('click', () => {
            showPage(landingPage);
        });

        // Initialize the application on window load
        window.onload = function() {
            renderProducts(); // Display products on initial load
            updateCartUI(); // Initialize cart UI
            showPage(landingPage); // Show the landing page by default
        };
    </script>
</body>
</html>
